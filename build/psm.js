ops=["add reg reg","add reg val","sub reg reg","sub reg val","and reg reg","or reg reg","xor reg reg","not reg","b val","mov reg reg","mov reg val","load reg val","sto reg reg","sto val reg","test reg reg","stop"],tok={white:/^\s*[\r\n]+|#.*/gm,name:/^([a-zA-Z_][\w_]*):/,nend:/:[\n\s]+/g,data:/(".*"|\d+)/g,code:/^[a-z]+\s([a-d]|\d+)(\s*,([a-d]|\d+))*$/},trim=b=>b.replaceAll(tok.white,"").replaceAll(tok.nend,":").trim(),names=c=>{let d;return c.map(b=>(d=b.match(tok.name))&&d[1])},clean=d=>{d=trim(d);let c=d.split("\n");return names(c).forEach((a,b)=>{d=d.replaceAll(`$${a}`,b).replaceAll(`${a}:`,"")}),d},array=c=>{let a;return(a=[...c.matchAll(tok.data)].map(b=>JSON.parse(b[0]))).length&&a},code=()=>{},parse=b=>b.map(b=>b.match(tok.code)?code(b):array(b)),psm=()=>{};
